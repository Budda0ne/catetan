{% capture video_source %}{{ include.id }}{% endcapture %}

<script type='text/javascript'>
const config = {
  loader: {
    trackerAnnounce: [
      "wss://wt.dailysport.pw:8433",
    ],
    rtcConfig: {
      iceServers: [
        { urls: "stun:stun.l.google.com:19302" },
        { urls: "stun:stun1.l.google.com:19302" },
        { urls: "stun:stun2.l.google.com:19302" },
        { urls: "stun:stun3.l.google.com:19302" },
        { urls: "stun:stun4.l.google.com:19302" },
        { urls: "stun:stun.l.google.com:19305" },
        { urls: "stun:stun1.l.google.com:19305" },
        { urls: "stun:stun2.l.google.com:19305" },
        { urls: "stun:stun3.l.google.com:19305" },
        { urls: "stun:stun4.l.google.com:19305" },
        { urls: "stun:global.stun.twilio.com:3478?transport=udp" }
      ]
    }
  }
};

if (p2pml.hlsjs.Engine.isSupported()) {
    var engine = new p2pml.hlsjs.Engine(config);
    var player = new Clappr.Player({
            parentId: '#player',
            source: '{{ video_source }}',
            width: '100%',
            height: '100%',
            playback: {
                    hlsjsConfig: {
                        liveSyncDurationCount: 7,
                        loader: engine.createLoaderClass()
                    }
                }
            });

            p2pml.hlsjs.initClapprPlayer(player);


        } else {
            var player = new Clappr.Player({
            source: '{{ video_source }}',
            plugins: [ChromecastPlugin],
            parentId: '#player',
            width: '100%',
            height: '100%'
        });
        }

</script>
